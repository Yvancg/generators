<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>SSN Generator â€” Test</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <style>
    body {
      font-family: system-ui, sans-serif;
      margin: 20px;
      max-width: 700px;
    }
    label { display: block; margin-top: 12px; font-size: 14px; }
    input[type="number"], input[type="text"] {
      width: 120px;
      padding: 4px 6px;
      font-size: 14px;
    }
    .row { margin-top: 10px; }
    button {
      padding: 6px 12px;
      margin-right: 8px;
    }
    pre {
      margin-top: 16px;
      padding: 10px;
      background: #f4f4f4;
      border: 1px solid #ddd;
      white-space: pre-wrap;
    }
  </style>
</head>

<body>

<h2>SSN Generator Test</h2>
<p>Generate synthetic, structurally valid US SSNs for demos and fixtures.</p>

<div class="row">
  <label>Count</label>
  <input id="count" type="number" min="1" value="5">
</div>

<div class="row">
  <label>Seed (optional)</label>
  <input id="seed" type="text" placeholder="seed string">
</div>

<div class="row">
  <label><input id="formatted" type="checkbox" checked> Formatted (123-45-6789)</label>
</div>

<div class="row">
  <label><input id="valid" type="checkbox" checked> Enforce validity rules</label>
</div>

<div class="row" style="margin-top: 14px;">
  <button id="generate">Generate</button>
  <button id="copy" disabled>Copy</button>
</div>

<pre id="output">Click Generate.</pre>

<script type="module">
import { generateSSN } from './ssn.js';

const $ = id => document.getElementById(id);
const out = $('output');
const copy = $('copy');

$('generate').onclick = () => {
  const count     = parseInt($('count').value, 10) || 1;
  const seed      = $('seed').value || null;
  const formatted = $('formatted').checked;
  const valid     = $('valid').checked;

  try {
    const list = generateSSN({ count, seed, formatted, valid });
    const text = Array.isArray(list) ? list.join('\\n') : list;

    out.textContent = text;
    copy.disabled = false;
    copy.dataset.payload = text;
  } catch (e) {
    out.textContent = 'Error: ' + e.message;
    copy.disabled = true;
  }
};

$('copy').onclick = async () => {
  try {
    await navigator.clipboard.writeText(copy.dataset.payload);
    const old = copy.textContent;
    copy.textContent = 'Copied';
    setTimeout(() => copy.textContent = old, 1000);
  } catch {
    copy.textContent = 'Error';
    setTimeout(() => copy.textContent = 'Copy', 1000);
  }
};
</script>

</body>
</html>