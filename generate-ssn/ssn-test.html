<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>SSN Generator â€” Test</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <style>
    body{font-family:ui-monospace,monospace;background:#fafafa;color:#222;max-width:800px;margin:40px auto;padding:20px}
    h1{font-size:1.4rem;margin-bottom:1rem}
    label{display:block;margin-top:10px}
    select,input[type="number"],input[type="text"]{padding:4px}
    .row{display:flex;gap:10px;align-items:center;margin-top:20px}
    .grid{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:10px}
    .hint{color:#666;font-size:.9rem}
    button{padding:8px 16px;cursor:pointer;font-family:inherit}
    pre{background:#eee;padding:12px;border-radius:6px;white-space:pre-wrap;word-break:break-word;margin-top:16px;min-height:120px}
    .small{font-size:.9rem}
  </style>
</head>

<body>

<h1>SSN Generator Test</h1>
<p>Generate synthetic, structurally valid US SSNs for demos and fixtures.</p>

<div class="row">
  <label>Count</label>
  <input id="count" type="number" min="1" value="5">
</div>

<div class="row">
  <label>Seed (optional)</label>
  <input id="seed" type="text" placeholder="seed string">
</div>

<div class="row">
  <label><input id="formatted" type="checkbox" checked> Formatted (123-45-6789)</label>
</div>

<div class="row">
  <label><input id="valid" type="checkbox" checked> Enforce validity rules</label>
</div>

<div class="row" style="margin-top: 14px;">
  <button id="generate">Generate</button>
  <button id="copy" disabled>Copy</button>
</div>

<pre id="output">Click Generate.</pre>

<script type="module">
import { generateSSN } from './ssn.js';

const $ = id => document.getElementById(id);
const out = $('output');
const copy = $('copy');

$('generate').onclick = () => {
  const count     = parseInt($('count').value, 10) || 1;
  const seed      = $('seed').value || null;
  const formatted = $('formatted').checked;
  const valid     = $('valid').checked;

  try {
    const list = generateSSN({ count, seed, formatted, valid });
    const text = Array.isArray(list) ? list.join('\n') : list;

    out.textContent = text;
    copy.disabled = false;
    copy.dataset.payload = text;
  } catch (e) {
    out.textContent = 'Error: ' + e.message;
    copy.disabled = true;
  }
};

$('copy').onclick = async () => {
  try {
    await navigator.clipboard.writeText(copy.dataset.payload);
    const old = copy.textContent;
    copy.textContent = 'Copied';
    setTimeout(() => copy.textContent = old, 1000);
  } catch {
    copy.textContent = 'Error';
    setTimeout(() => copy.textContent = 'Copy', 1000);
  }
};
</script>

</body>
</html>
